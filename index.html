<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>متجر طارق T8</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    body {
      font-family: 'Tajawal', sans-serif;
      margin: 0;
      background-color: #f4f4f4;
      direction: rtl;
    }
    header {
      text-align: center;
      font-size: 28px;
      font-weight: bold;
      padding: 12px;
      background-color: #ffffff;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      user-select: none;
    }
    .categories {
      display: flex;
      overflow-x: auto;
      gap: 12px;
      padding: 12px;
      background-color: white;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      justify-content: center;
      
    }
    .category {
      flex: 0 0 auto;
      width: 80px;
      height: 100px;
      background-color: #f0f0f0;
      border-radius: 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      text-align: center;
      color: #002A6C;
      font-size: 13px;
      font-weight: 500;
      padding: 10px 8px 8px;
      cursor: pointer;
      transition: background-color 0.3s;
      user-select: none;
    }
    .category:hover, .category:focus {
      background-color: #e0e0ff;
      outline: none;
    }
    .category i {
      font-size: 24px;
      margin-top: 6px;
      color: #002A6C;
    }
    .section-title {
      font-size: 20px;
      font-weight: bold;
      padding: 10px 15px 0;
      color: #002060;
      user-select: none;
      text-align: center;
    }
    .products {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      padding: 12px;
    }
    .product {
  max-width: 260px;
      background-color: white;
      border-radius: 15px;
      padding: 10px;
      box-shadow: 0 0 8px rgba(0,0,0,0.05);
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
.product-img {
  width: 100%;
  height: 260px;
  object-fit: cover;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

;
    
    .product-name {
      font-size: 15px;
      font-weight: bold;
      margin: 6px 0 4px;
      text-align: center;
      user-select: none;
    }
    .product-price {
      color: #d21f1f;
      font-size: 16px;
      margin-bottom: 6px;
      font-weight: 700;
      text-align: center;
      user-select: none;
    }
    .product-sizes {
      display: flex;
      gap: 5px;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 6px;
    }
    .product-sizes span {
      background-color: #add8e6; /* أزرق فاتح */
      padding: 6px 12px;
      border-radius: 12px;
      font-size: 13px;
      cursor: pointer;
      color: #002A6C;
      border: 1px solid transparent;
      user-select: none;
      transition: all 0.3s ease;
    }
    .product-sizes span.selected {
      background-color: #004080; /* أزرق داكن */
      color: white;
      border: 1px solid #002A6C;
    }
    .add-to-cart-btn {
      background-color: #002A6C;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 12px;
      font-size: 13px;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.3s;
      width: 100%;
      max-width: 160px;
      display: none;
      margin-top: 4px;
    }
    .add-to-cart-btn:disabled {
      background-color: #7a8caf;
      cursor: not-allowed;
    }
    .add-to-cart-btn:hover:not(:disabled) {
      background-color: #001f4d;
    }
    .cart-icon {
      position: fixed;
      top: 10px;
      left: 10px;
      font-size: 22px;
      background: #002A6C;
      color: white;
      padding: 8px 12px;
      border-radius: 50px;
      cursor: pointer;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      user-select: none;
    }
    .cart-count {
      position: absolute;
      top: -6px;
      left: -6px;
      background: red;
      color: white;
      font-size: 12px;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
      user-select: none;
    }
    
/* سلايدر */
.slider-container {
  position: relative;
  width: 100%;
  height: 240px;
  overflow: hidden;
  border-radius: 10px;
  margin-bottom: 10px;
}
.product-slider-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 10px;
  transition: opacity 0.5s ease;
  cursor: pointer;
}
.slider-arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 22px;
  background: rgba(0,0,0,0.4);
  color: white;
  padding: 4px 10px;
  border-radius: 50%;
  cursor: pointer;
  z-index: 2;
}
.arrow-left { left: 10px; }
.arrow-right { right: 10px; }

/* Lightbox */
.lightbox {
  position: fixed;
  top: 0; right: 0; bottom: 0; left: 0;
  background: rgba(0, 0, 0, 0.85);
  display: none;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  z-index: 9999;
}
.lightbox.active {
  display: flex;
}
.lightbox img {
  max-width: 90%;
  max-height: 80vh;
  border-radius: 10px;
}
.lightbox .slider-arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 30px;
  background: rgba(255,255,255,0.3);
  color: #fff;
}
.lightbox .arrow-left { left: 30px; }
.lightbox .arrow-right { right: 30px; }
.close-lightbox {
  position: absolute;
  top: 20px;
  left: 20px;
  font-size: 28px;
  color: white;
  background: rgba(255,255,255,0.2);
  border-radius: 50%;
  padding: 5px 12px;
  cursor: pointer;
}


/* مودال السلة */
    #cart-modal {
      position: fixed;
      top: 50px;
      left: 50%;
      transform: translateX(-50%);
      width: 320px;
      max-height: 80vh;
      background: white;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      overflow-y: auto;
      z-index: 10000;
      display: none;
      flex-direction: column;
      padding: 12px 16px;
    }
    #cart-modal.active {
      display: flex;
    }
    #cart-modal h3 {
      margin: 0 0 10px 0;
      text-align: center;
      color: #002A6C;
      user-select: none;
    }
    #cart-items {
      flex-grow: 1;
      overflow-y: auto;
      user-select: none;
    }
    .cart-item {
      border-bottom: 1px solid #eee;
      padding: 8px 0;
      font-size: 14px;
      color: #002060;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .cart-item span {
      display: inline-block;
    }
    .cart-item .remove-btn {
      color: red;
      cursor: pointer;
      font-weight: bold;
      user-select: none;
      font-size: 16px;
      align-self: flex-start;
      margin-top: 4px;
    }
    #cart-total {
      font-weight: bold;
      font-size: 16px;
      margin-top: 10px;
      text-align: center;
      color: #d21f1f;
      user-select: none;
    }
    #btn-confirm-order {
      margin-top: 12px;
      background-color: #002A6C;
      color: white;
      border: none;
      padding: 8px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: bold;
      font-size: 15px;
      width: 100%;
      user-select: none;
    }
    #btn-confirm-order:hover {
      background-color: #001f4d;
    }
    /* نموذج الطلب */
    #order-form {
      display: none;
      flex-direction: column;
      gap: 10px;
      margin-top: 15px;
    }
    #order-form.active {
      display: flex;
    }
    #order-form label {
      font-size: 14px;
      color: #002060;
      user-select: none;
    }
    #order-form input, #order-form textarea {
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
      resize: vertical;
      font-family: 'Tajawal', sans-serif;
    }
    #order-form textarea {
      min-height: 60px;
    }
    #order-success {
      display: none;
      margin-top: 15px;
      padding: 12px;
      background-color: #dff0d8;
      color: #3c763d;
      border-radius: 10px;
      text-align: center;
      font-weight: bold;
      font-size: 16px;
      user-select: none;
    }
    /* زر إغلاق المودال */
    #close-cart {
      align-self: flex-end;
      cursor: pointer;
      font-size: 20px;
      color: #002A6C;
      margin-bottom: 8px;
      font-weight: bold;
      border: none;
      background: none;
      user-select: none;
    }
  
.product-img-slider {
  position: relative;
  width: 100%;
  height: 260px;
  overflow: hidden;
}

.product-img-slider img {
  position: absolute;
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.6s ease-in-out;
  left: 0;
  top: 0;
  opacity: 1;
  transform: translateX(100%);
}


.product-img-slider img.active {
  transform: translateX(0%);
  z-index: 1;
}


/* تحسين عرض المنتجات على الشاشات الصغيرة */
@media (max-width: 600px) {
  .products {
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
  }
}

</style>
</head>
<body>
  <header id="store-name" tabindex="0" aria-pressed="false">متجر طارق T8</header>

  
<div class="categories" role="list">
  <div class="category" role="listitem" data-category="رجالي" tabindex="0" aria-label="قسم رجالي">
    <i class="fas fa-mars"></i>
    <span>رجالي</span>
  </div>
  <div class="category" role="listitem" data-category="نسائي" tabindex="0" aria-label="قسم نسائي">
    <i class="fas fa-venus"></i>
    <span>نسائي</span>
  </div>
  <div class="category" role="listitem" data-category="أطفال" tabindex="0" aria-label="قسم أطفال">
    <i class="fas fa-child"></i>
    <span>أطفال</span>
  </div>
</div>

<!-- أقسام فرعية -->
<div id="sub-sections" style="display:none; padding: 10px; display:flex; justify-content:center; gap: 10px;">
  <!-- يتم تعبئته ديناميكياً عبر JavaScript -->
</div>


  <div class="section-title" id="section-title">عروض مميزة</div>
  <div class="products" id="products-container"></div>

  <!-- أيقونة السلة مع العدد -->
  <div class="cart-icon" id="cart-icon" role="button" tabindex="0" aria-label="عرض السلة">
    <i class="fas fa-shopping-cart"></i>
    <span class="cart-count" id="cart-count">0</span>
  </div>

  <!-- مودال السلة -->
  <div id="cart-modal" role="dialog" aria-modal="true" aria-labelledby="cart-modal-title">
    <button id="close-cart" aria-label="إغلاق نافذة السلة">×</button>
    <h3 id="cart-modal-title">السلة</h3>
    <div id="cart-items"></div>
    <div id="cart-total">المجموع: 0 د.ل</div>
    <button id="btn-confirm-order">تأكيد الطلب</button>

    <!-- نموذج تأكيد الطلب -->
    <form id="order-form" aria-live="polite">
      <label for="name">الاسم:</label>
      <input type="text" id="name" name="name" required autocomplete="name" />

      <label for="phone">رقم الهاتف:</label>
      <input type="tel" id="phone" name="phone" required pattern="[0-9+ ]+" autocomplete="tel" />

      <label for="city">المدينة:</label>
      <input type="text" id="city" name="city" required />

      <label for="address">العنوان:</label>
      <input type="text" id="address" name="address" required />

      <label for="notes">ملاحظات:</label>
      <textarea id="notes" name="notes"></textarea>

      <button type="submit">إرسال الطلب</button>
    </form>

    <div id="order-success">تم استلام طلبك بنجاح!</div>
  </div>

  <script>
    // بيانات المنتجات
    const productsData = [
{
  category: "ملابس رجالي",
  name: "قميص رجالي",
  price: 150,
  sizes: ["S", "M", "L", "XL"],
  img: [
    "https://cdn.salla.sa/YKnZL/Bz5PsoEyKmNSgq3AHrcFAqQST8v41a9CJ8nK7LGx.jpg",
    "https://cdn.salla.sa/YKnZL/yTRMPFYBJGXLJ5K7Bt0UHX6oIggEIfp93PzSVgyU.jpg",
    "https://cdn.salla.sa/YKnZL/W6KDznC2gW7C14FXzG3MIx2q9b2TOO3p8A13KuWS.jpg"
  ]
},
{
  category: "ملابس رجالي",
  name: "تيشيرت رجالي",
  price: 110,
  sizes: ["S", "M", "L", "XL"],
  img: [
    "https://cdn.salla.sa/YKnZL/Bz5PsoEyKmNSgq3AHrcFAqQST8v41a9CJ8nK7LGx.jpg",
    "https://cdn.salla.sa/YKnZL/yTRMPFYBJGXLJ5K7Bt0UHX6oIggEIfp93PzSVgyU.jpg",
    "https://cdn.salla.sa/YKnZL/W6KDznC2gW7C14FXzG3MIx2q9b2TOO3p8A13KuWS.jpg"
  ]
},
{
  category: "أحذية رجالي",
  name: "حذاء جلد",
  price: 220,
  sizes: ["S", "M", "L", "XL"],
  img: [
    "https://cdn.salla.sa/YKnZL/Bz5PsoEyKmNSgq3AHrcFAqQST8v41a9CJ8nK7LGx.jpg",
    "https://cdn.salla.sa/YKnZL/yTRMPFYBJGXLJ5K7Bt0UHX6oIggEIfp93PzSVgyU.jpg",
    "https://cdn.salla.sa/YKnZL/W6KDznC2gW7C14FXzG3MIx2q9b2TOO3p8A13KuWS.jpg"
  ]
},
{
  category: "أحذية رجالي",
  name: "حذاء رياضي",
  price: 180,
  sizes: ["S", "M", "L", "XL"],
  img: [
    "https://cdn.salla.sa/YKnZL/Bz5PsoEyKmNSgq3AHrcFAqQST8v41a9CJ8nK7LGx.jpg",
    "https://cdn.salla.sa/YKnZL/yTRMPFYBJGXLJ5K7Bt0UHX6oIggEIfp93PzSVgyU.jpg",
    "https://cdn.salla.sa/YKnZL/W6KDznC2gW7C14FXzG3MIx2q9b2TOO3p8A13KuWS.jpg"
  ]
},
{
  category: "اكسسوارات رجالي",
  name: "ساعة رجالية",
  price: 300,
  sizes: ["S", "M", "L", "XL"],
  img: [
    "https://cdn.salla.sa/YKnZL/Bz5PsoEyKmNSgq3AHrcFAqQST8v41a9CJ8nK7LGx.jpg",
    "https://cdn.salla.sa/YKnZL/yTRMPFYBJGXLJ5K7Bt0UHX6oIggEIfp93PzSVgyU.jpg",
    "https://cdn.salla.sa/YKnZL/W6KDznC2gW7C14FXzG3MIx2q9b2TOO3p8A13KuWS.jpg"
  ]
},
{
  category: "اكسسوارات رجالي",
  name: "نظارة شمس",
  price: 90,
  sizes: ["S", "M", "L", "XL"],
  img: [
    "https://cdn.salla.sa/YKnZL/Bz5PsoEyKmNSgq3AHrcFAqQST8v41a9CJ8nK7LGx.jpg",
    "https://cdn.salla.sa/YKnZL/yTRMPFYBJGXLJ5K7Bt0UHX6oIggEIfp93PzSVgyU.jpg",
    "https://cdn.salla.sa/YKnZL/W6KDznC2gW7C14FXzG3MIx2q9b2TOO3p8A13KuWS.jpg"
  ]
},
{
  category: "ملابس نسائي",
  name: "فستان صيفي",
  price: 230,
  sizes: ["S", "M", "L", "XL"],
  img: [
    "https://cdn.salla.sa/YKnZL/Bz5PsoEyKmNSgq3AHrcFAqQST8v41a9CJ8nK7LGx.jpg",
    "https://cdn.salla.sa/YKnZL/yTRMPFYBJGXLJ5K7Bt0UHX6oIggEIfp93PzSVgyU.jpg",
    "https://cdn.salla.sa/YKnZL/W6KDznC2gW7C14FXzG3MIx2q9b2TOO3p8A13KuWS.jpg"
  ]
},
{
  category: "ملابس نسائي",
  name: "بلوزة حرير",
  price: 160,
  sizes: ["S", "M", "L", "XL"],
  img: [
    "https://cdn.salla.sa/YKnZL/Bz5PsoEyKmNSgq3AHrcFAqQST8v41a9CJ8nK7LGx.jpg",
    "https://cdn.salla.sa/YKnZL/yTRMPFYBJGXLJ5K7Bt0UHX6oIggEIfp93PzSVgyU.jpg",
    "https://cdn.salla.sa/YKnZL/W6KDznC2gW7C14FXzG3MIx2q9b2TOO3p8A13KuWS.jpg"
  ]
},
{
  category: "أحذية نسائي",
  name: "كعب عالي",
  price: 270,
  sizes: ["S", "M", "L", "XL"],
  img: [
    "https://cdn.salla.sa/YKnZL/Bz5PsoEyKmNSgq3AHrcFAqQST8v41a9CJ8nK7LGx.jpg",
    "https://cdn.salla.sa/YKnZL/yTRMPFYBJGXLJ5K7Bt0UHX6oIggEIfp93PzSVgyU.jpg",
    "https://cdn.salla.sa/YKnZL/W6KDznC2gW7C14FXzG3MIx2q9b2TOO3p8A13KuWS.jpg"
  ]
},
{
  category: "أحذية نسائي",
  name: "حذاء كاجوال",
  price: 190,
  sizes: ["S", "M", "L", "XL"],
  img: [
    "https://cdn.salla.sa/YKnZL/Bz5PsoEyKmNSgq3AHrcFAqQST8v41a9CJ8nK7LGx.jpg",
    "https://cdn.salla.sa/YKnZL/yTRMPFYBJGXLJ5K7Bt0UHX6oIggEIfp93PzSVgyU.jpg",
    "https://cdn.salla.sa/YKnZL/W6KDznC2gW7C14FXzG3MIx2q9b2TOO3p8A13KuWS.jpg"
  ]
},
{
  category: "اكسسوارات نسائي",
  name: "سلسلة ذهب",
  price: 280,
  sizes: ["S", "M", "L", "XL"],
  img: [
    "https://cdn.salla.sa/YKnZL/Bz5PsoEyKmNSgq3AHrcFAqQST8v41a9CJ8nK7LGx.jpg",
    "https://cdn.salla.sa/YKnZL/yTRMPFYBJGXLJ5K7Bt0UHX6oIggEIfp93PzSVgyU.jpg",
    "https://cdn.salla.sa/YKnZL/W6KDznC2gW7C14FXzG3MIx2q9b2TOO3p8A13KuWS.jpg"
  ]
},
{
  category: "اكسسوارات نسائي",
  name: "شنطة يد",
  price: 150,
  sizes: ["S", "M", "L", "XL"],
  img: [
    "https://cdn.salla.sa/YKnZL/Bz5PsoEyKmNSgq3AHrcFAqQST8v41a9CJ8nK7LGx.jpg",
    "https://cdn.salla.sa/YKnZL/yTRMPFYBJGXLJ5K7Bt0UHX6oIggEIfp93PzSVgyU.jpg",
    "https://cdn.salla.sa/YKnZL/W6KDznC2gW7C14FXzG3MIx2q9b2TOO3p8A13KuWS.jpg"
  ]
},
{
  category: "ملابس أطفال",
  name: "تيشيرت أطفال",
  price: 80,
  sizes: ["S", "M", "L", "XL"],
  img: [
    "https://cdn.salla.sa/YKnZL/Bz5PsoEyKmNSgq3AHrcFAqQST8v41a9CJ8nK7LGx.jpg",
    "https://cdn.salla.sa/YKnZL/yTRMPFYBJGXLJ5K7Bt0UHX6oIggEIfp93PzSVgyU.jpg",
    "https://cdn.salla.sa/YKnZL/W6KDznC2gW7C14FXzG3MIx2q9b2TOO3p8A13KuWS.jpg"
  ]
},
{
  category: "ملابس أطفال",
  name: "بنطلون أطفال",
  price: 90,
  sizes: ["S", "M", "L", "XL"],
  img: [
    "https://cdn.salla.sa/YKnZL/Bz5PsoEyKmNSgq3AHrcFAqQST8v41a9CJ8nK7LGx.jpg",
    "https://cdn.salla.sa/YKnZL/yTRMPFYBJGXLJ5K7Bt0UHX6oIggEIfp93PzSVgyU.jpg",
    "https://cdn.salla.sa/YKnZL/W6KDznC2gW7C14FXzG3MIx2q9b2TOO3p8A13KuWS.jpg"
  ]
},
{
  category: "أحذية أطفال",
  name: "سنيكرز أطفال",
  price: 100,
  sizes: ["S", "M", "L", "XL"],
  img: [
    "https://cdn.salla.sa/YKnZL/Bz5PsoEyKmNSgq3AHrcFAqQST8v41a9CJ8nK7LGx.jpg",
    "https://cdn.salla.sa/YKnZL/yTRMPFYBJGXLJ5K7Bt0UHX6oIggEIfp93PzSVgyU.jpg",
    "https://cdn.salla.sa/YKnZL/W6KDznC2gW7C14FXzG3MIx2q9b2TOO3p8A13KuWS.jpg"
  ]
},
{
  category: "أحذية أطفال",
  name: "حذاء أطفال رسمي",
  price: 110,
  sizes: ["S", "M", "L", "XL"],
  img: [
    "https://cdn.salla.sa/YKnZL/Bz5PsoEyKmNSgq3AHrcFAqQST8v41a9CJ8nK7LGx.jpg",
    "https://cdn.salla.sa/YKnZL/yTRMPFYBJGXLJ5K7Bt0UHX6oIggEIfp93PzSVgyU.jpg",
    "https://cdn.salla.sa/YKnZL/W6KDznC2gW7C14FXzG3MIx2q9b2TOO3p8A13KuWS.jpg"
  ]
},
{
  category: "اكسسوارات أطفال",
  name: "قبعة أطفال",
  price: 50,
  sizes: ["S", "M", "L", "XL"],
  img: [
    "https://cdn.salla.sa/YKnZL/Bz5PsoEyKmNSgq3AHrcFAqQST8v41a9CJ8nK7LGx.jpg",
    "https://cdn.salla.sa/YKnZL/yTRMPFYBJGXLJ5K7Bt0UHX6oIggEIfp93PzSVgyU.jpg",
    "https://cdn.salla.sa/YKnZL/W6KDznC2gW7C14FXzG3MIx2q9b2TOO3p8A13KuWS.jpg"
  ]
},
{
  category: "اكسسوارات أطفال",
  name: "نظارة أطفال",
  price: 60,
  sizes: ["S", "M", "L", "XL"],
  img: [
    "https://cdn.salla.sa/YKnZL/Bz5PsoEyKmNSgq3AHrcFAqQST8v41a9CJ8nK7LGx.jpg",
    "https://cdn.salla.sa/YKnZL/yTRMPFYBJGXLJ5K7Bt0UHX6oIggEIfp93PzSVgyU.jpg",
    "https://cdn.salla.sa/YKnZL/W6KDznC2gW7C14FXzG3MIx2q9b2TOO3p8A13KuWS.jpg"
  ]
}
];

    // المتغيرات
    const categoriesEls = document.querySelectorAll('.category');
    const productsContainer = document.getElementById('products-container');
    const sectionTitle = document.getElementById('section-title');
    const cartIcon = document.getElementById('cart-icon');
    const cartCountEl = document.getElementById('cart-count');
    const cartModal = document.getElementById('cart-modal');
    const cartItemsEl = document.getElementById('cart-items');
    const cartTotalEl = document.getElementById('cart-total');
    const btnConfirmOrder = document.getElementById('btn-confirm-order');
    const orderForm = document.getElementById('order-form');
    const orderSuccess = document.getElementById('order-success');
    const closeCartBtn = document.getElementById('close-cart');

    let selectedCategory = "رجالي";
    let cart = [];

    // عرض المنتجات حسب القسم
    function displayProducts(category) {
      sectionTitle.textContent = category;
      productsContainer.innerHTML = '';
      const filtered = productsData.filter(p => p.category === category).slice(0, 4); // أربعة أصناف لكل قسم
      filtered.forEach((product, index) => {
        const productDiv = document.createElement('div');
        productDiv.classList.add('product');

        productDiv.innerHTML = `
         
  <div class="slider-container">
    <span class="slider-arrow arrow-left" onclick="prevSlide(this)">‹</span>
    <img class="product-slider-img" src="${product.img[0]}" onclick="openLightbox(this)" />
    <span class="slider-arrow arrow-right" onclick="nextSlide(this)">›</span>
  </div>
  
          <div class="product-name">${product.name}</div>
          <div class="product-price">${product.price} د.ل</div>
          <div class="product-sizes" role="list" aria-label="مقاسات المنتج">
            ${product.sizes.map(size => `<span role="listitem" tabindex="0" data-product-index="${index}" data-size="${size}">${size}</span>`).join('')}
          </div>
          <button class="add-to-cart-btn" disabled aria-disabled="true" aria-label="إضافة المنتج إلى السلة">🛒 إضافة للسلة</button>
        `;

        productsContainer.appendChild(productDiv);
      });
      setupSizeSelection(); initSliders();
    }

    // تفعيل اختيار المقاسات
    function setupSizeSelection() {
      const productEls = productsContainer.querySelectorAll('.product');
      productEls.forEach((prodEl, prodIdx) => {
        const sizeSpans = prodEl.querySelectorAll('.product-sizes span');
        const addBtn = prodEl.querySelector('.add-to-cart-btn');
        let selectedSize = null;

        sizeSpans.forEach(sizeEl => {
          sizeEl.addEventListener('click', () => {
            // إلغاء اختيار المقاسات الأخرى
            sizeSpans.forEach(s => {
              s.classList.remove('selected');
              s.setAttribute('aria-pressed', 'false');
            });
            sizeEl.classList.add('selected');
            sizeEl.setAttribute('aria-pressed', 'true');
            selectedSize = sizeEl.dataset.size;
            addBtn.disabled = false;
            addBtn.setAttribute('aria-disabled', 'false');
          });
          sizeEl.addEventListener('keydown', (e) => {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              sizeEl.click();
            }
          });
        });

        addBtn.style.display = 'block';
        addBtn.onclick = () => {
          if (!selectedSize) return;
          const product = productsData.filter(p => p.category === selectedCategory).slice(0,4)[prodIdx];
          addToCart(product, selectedSize);
          // إعادة تعيين حالة الزر والمقاسات
          addBtn.disabled = true;
          addBtn.setAttribute('aria-disabled', 'true');
          sizeSpans.forEach(s => {
            s.classList.remove('selected');
            s.setAttribute('aria-pressed', 'false');
          });
          selectedSize = null;
        };
      });
    }

    // إضافة منتج للسلة
    function addToCart(product, size) {
      // تحقق إذا المنتج بنفس المقاس موجود مسبقًا لزيادة الكمية
      const existingIndex = cart.findIndex(item => item.name === product.name && item.size === size);
      if (existingIndex !== -1) {
        cart[existingIndex].quantity++;
      } else {
        cart.push({ name: product.name, price: product.price, size, quantity: 1 });
      }
      updateCartCount();
    }

    // تحديث عدد المنتجات في شعار السلة
    function updateCartCount() {
      const totalItems = cart.reduce((acc, item) => acc + item.quantity, 0);
      cartCountEl.textContent = totalItems;
    }

    // عرض محتوى السلة في المودال
    function displayCartItems() {
      cartItemsEl.innerHTML = '';
      if (cart.length === 0) {
        cartItemsEl.textContent = 'السلة فارغة';
        cartTotalEl.textContent = 'المجموع: 0 د.ل';
        btnConfirmOrder.style.display = 'none';
        orderForm.classList.remove('active');
        orderSuccess.style.display = 'none';
        return;
      }
      btnConfirmOrder.style.display = 'block';
      orderForm.classList.remove('active');
      orderSuccess.style.display = 'none';

      cart.forEach((item, idx) => {
        const div = document.createElement('div');
        div.classList.add('cart-item');
        div.innerHTML = `
          <span><strong>${item.name}</strong> - المقاس: ${item.size}</span>
          <span>الكمية: ${item.quantity}</span>
          <span>السعر الفردي: ${item.price} د.ل</span>
          <span>المجموع: ${item.price * item.quantity} د.ل</span>
          <span class="remove-btn" role="button" tabindex="0" aria-label="إزالة ${item.name} من السلة" data-index="${idx}">× إزالة</span>
        `;
        cartItemsEl.appendChild(div);
      });

      // اجمالي السعر
      const totalPrice = cart.reduce((acc, item) => acc + item.price * item.quantity, 0);
      cartTotalEl.textContent = `المجموع: ${totalPrice} د.ل`;

      // أحداث إزالة الأصناف
      cartItemsEl.querySelectorAll('.remove-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const idx = parseInt(btn.dataset.index, 10);
          cart.splice(idx, 1);
          updateCartCount();
          displayCartItems();
        });
        btn.addEventListener('keydown', e => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            btn.click();
          }
        });
      });
    }

    // فتح وإغلاق السلة
    cartIcon.addEventListener('click', () => {
      cartModal.classList.toggle('active');
      displayCartItems();
      btnConfirmOrder.style.display = cart.length ? 'block' : 'none';
      orderForm.classList.remove('active');
      orderSuccess.style.display = 'none';
    });
    cartIcon.addEventListener('keydown', e => {
      if (e.key === "Enter" || e.key === " ") {
        e.preventDefault();
        cartIcon.click();
      }
    });

    closeCartBtn.addEventListener('click', () => {
      cartModal.classList.remove('active');
      orderForm.classList.remove('active');
      orderSuccess.style.display = 'none';
    });

    // اختيار القسم من الشريط العلوي
    categoriesEls.forEach(catEl => {
      catEl.addEventListener('click', () => {
        selectedCategory = catEl.dataset.category;
        displayProducts(selectedCategory);
      });
      catEl.addEventListener('keydown', e => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          catEl.click();
        }
      });
    });

    // تأكيد الطلب - إظهار نموذج إدخال البيانات
   btnConfirmOrder.addEventListener('click', () => {
    orderForm.style.display = 'flex';
    btnConfirmOrder.style.display = 'none';
    orderSuccess.style.display = 'none';
  });

  // إرسال الطلب
  orderForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    // جمع البيانات من النموذج
    const name = document.getElementById('name').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const city = document.getElementById('city').value.trim();
    const address = document.getElementById('address').value.trim();
    const notes = document.getElementById('notes').value.trim();

    if(cart.length === 0) {
      alert('السلة فارغة، الرجاء إضافة منتجات.');
      return;
    }

    // بناء نص المشتريات
    const itemsText = cart.map(item => `• ${item.name} - المقاس: ${item.size} - الكمية: ${item.quantity} - السعر: ${item.price} د.ل`).join('\n');

    // حساب المجموع الكلي
    const totalPrice = cart.reduce((acc, item) => acc + item.price * item.quantity, 0);

    // رسالة الطلب
    const message = `
📦 طلب جديد من متجر طارق
👤 الاسم: ${name}
📞 الهاتف: ${phone}
🏙️ المدينة: ${city}
📍 العنوان: ${address}
📝 ملاحظات: ${notes}

🛒 المشتريات:
${itemsText}

📊 المجموع الكلي: ${totalPrice} د.ل
`;

    const botToken = "7904675794:AAErKUwOydYemruU0cp3pFsKRG2_7vj72UU";
    const chatId = "355888174";

    try {
      const response = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ chat_id: chatId, text: message })
      });

      if(response.ok) {
        alert('✅ تم إرسال الطلب بنجاح!');
        cart = [];
        updateCartCount();
        displayCartItems();
        orderForm.reset();
        orderForm.style.display = 'none';
        btnConfirmOrder.style.display = 'block';
        orderSuccess.style.display = 'block';
      } else {
        alert('❌ فشل إرسال الطلب. حاول مرة أخرى.');
      }
    } catch (error) {
      alert('❌ حدث خطأ أثناء إرسال الطلب.');
      console.error(error);
    }
  });

  
// سلايدر
let currentSlides = {};
function initSliders() {
  document.querySelectorAll('.product').forEach((productEl, i) => {
    const imgEl = productEl.querySelector('.product-slider-img');
    const productsInCat = productsData.filter(p => p.category === selectedCategory).slice(0, 4);
    const product = productsInCat[i];
    if (!product || !Array.isArray(product.img)) return;
    let imgs = product.img;
    let idx = 0;
    currentSlides[i] = setInterval(() => {
      idx = (idx + 1) % imgs.length;
      imgEl.src = imgs[idx];
    }, 2000);
    imgEl.dataset.index = i;
  });
}

function nextSlide(btn) {
  const prod = btn.closest('.product');
  const img = prod.querySelector('.product-slider-img');
  const i = parseInt(img.dataset.index);
  const product = productsData.filter(p => p.category === selectedCategory).slice(0, 4)[i];
  let imgs = product.img;
  let current = imgs.indexOf(img.src);
  img.src = imgs[(current + 1) % imgs.length];
}

function prevSlide(btn) {
  const prod = btn.closest('.product');
  const img = prod.querySelector('.product-slider-img');
  const i = parseInt(img.dataset.index);
  const product = productsData.filter(p => p.category === selectedCategory).slice(0, 4)[i];
  let imgs = product.img;
  let current = imgs.indexOf(img.src);
  img.src = imgs[(current - 1 + imgs.length) % imgs.length];
}

let currentIndex = 0;
function openLightbox(img) {
  currentIndex = parseInt(img.dataset.index);
  const product = productsData.filter(p => p.category === selectedCategory).slice(0, 4)[currentIndex];
  const imgs = product.img;
  const lightbox = document.getElementById("lightbox");
  const lightboxImg = document.getElementById("lightbox-img");
  lightbox.classList.add("active");
  lightboxImg.src = img.src;
}

function closeLightbox() {
  document.getElementById("lightbox").classList.remove("active");
}

function nextSlideLightbox() {
  const product = productsData.filter(p => p.category === selectedCategory).slice(0, 4)[currentIndex];
  const imgs = product.img;
  const imgEl = document.getElementById("lightbox-img");
  let current = imgs.indexOf(imgEl.src);
  imgEl.src = imgs[(current + 1) % imgs.length];
}

function prevSlideLightbox() {
  const product = productsData.filter(p => p.category === selectedCategory).slice(0, 4)[currentIndex];
  const imgs = product.img;
  const imgEl = document.getElementById("lightbox-img");
  let current = imgs.indexOf(imgEl.src);
  imgEl.src = imgs[(current - 1 + imgs.length) % imgs.length];
}


// **الكود الخاص بعرض المنتجات واختيار المقاسات وإضافة للسلة** (يجب أن يبقى كما لديك سابقًا)
  // تأكد أن تستدعي addToCart(product, size) بشكل صحيح عند الضغط على زر الإضافة للسلة.

</script>

<form id="orderForm" style="max-width:400px; margin: 20px auto; background:#fff; padding:20px; border-radius:12px; display: none;">
  <input id="customer-name" type="text" placeholder="الاسم" required />
  <input id="customer-phone" type="tel" placeholder="رقم الهاتف" required />
  <input id="customer-city" type="text" placeholder="المدينة" required />
  <input id="customer-address" type="text" placeholder="العنوان" required />
  <textarea id="customer-notes" placeholder="ملاحظات"></textarea>
  <button type="submit">إرسال الطلب</button>
</form>
</script>

<!-- Lightbox -->
<div class="lightbox" id="lightbox">
  <span class="close-lightbox" onclick="closeLightbox()">×</span>
  <span class="slider-arrow arrow-left" onclick="prevSlideLightbox()">‹</span>
  <img id="lightbox-img" src="" />
  <span class="slider-arrow arrow-right" onclick="nextSlideLightbox()">›</span>
</div>



<script>
window.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll('.product-img-slider').forEach(slider => {
    const imgs = slider.querySelectorAll('img');
    let index = 0;
    imgs.forEach((img, i) => {
      img.style.transform = i === 0 ? 'translateX(0%)' : 'translateX(100%)';
    });
    setInterval(() => {
      imgs[index].classList.remove('active');
      imgs[index].style.transform = 'translateX(-100%)';
      index = (index + 1) % imgs.length;
      imgs[index].classList.add('active');
      imgs[index].style.transform = 'translateX(0%)';
      for (let i = 0; i < imgs.length; i++) {
        if (i !== index) imgs[i].style.transform = 'translateX(100%)';
      }
    }, 1500);
  });
});
</script>




<script>
window.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll('.product-img-slider').forEach(slider => {
    const imgs = slider.querySelectorAll('img');
    let index = 0;
    imgs.forEach((img, i) => {
      img.style.transform = i === 0 ? 'translateX(0%)' : 'translateX(100%)';
    });
    setInterval(() => {
      imgs[index].classList.remove('active');
      imgs[index].style.transform = 'translateX(-100%)';
      index = (index + 1) % imgs.length;
      imgs[index].classList.add('active');
      imgs[index].style.transform = 'translateX(0%)';
      for (let i = 0; i < imgs.length; i++) {
        if (i !== index) imgs[i].style.transform = 'translateX(100%)';
      }
    }, 1500);
  });
});
</script>



<script>
  const subCategoriesMap = {
    "رجالي": ["ملابس رجالي", "أحذية رجالي", "اكسسوارات رجالي"],
    "نسائي": ["ملابس نسائي", "أحذية نسائي", "اكسسوارات نسائي"],
    "أطفال": ["ملابس أطفال", "أحذية أطفال", "اكسسوارات أطفال"]
  };

  document.querySelectorAll(".category").forEach(el => {
    el.addEventListener("click", () => {
      const mainCat = el.dataset.category;
      if (subCategoriesMap[mainCat]) {
        const subDiv = document.getElementById("sub-sections");
        subDiv.innerHTML = "";
        subCategoriesMap[mainCat].forEach(sub => {
          const div = document.createElement("div");
          div.className = "category";
          div.dataset.category = sub;
          div.innerHTML = `<i class='fas fa-tag'></i><span>${sub}</span>`;
          div.onclick = () => {
            selectedCategory = sub;
            displayProducts(sub);
          };
          subDiv.appendChild(div);
        });
        subDiv.style.display = "flex";
        document.getElementById("section-title").textContent = mainCat;
        document.getElementById("products-container").innerHTML = "";
      }
    });
  });
</script>


<script>
  const telegramBotToken = "ضع_التوكن_هنا";
  const telegramChatId = "ضع_ChatID_هنا";

  document.getElementById("confirm-order").addEventListener("click", function () {
    const name = document.getElementById("customer-name").value.trim();
    const phone = document.getElementById("customer-phone").value.trim();
    const city = document.getElementById("customer-city").value.trim();
    const address = document.getElementById("customer-address").value.trim();
    const notes = document.getElementById("customer-notes").value.trim();

    if (!name || !phone || !city || !address) {
      alert("يرجى تعبئة جميع الحقول المطلوبة");
      return;
    }

    let orderDetails = cart.map(item => {
      return `• ${item.name} (${item.size}) - ${item.price} ريال`;
    }).join("%0A");

    const total = cart.reduce((sum, item) => sum + item.price, 0);

    const message = `🛒 طلب جديد:%0A
👤 الاسم: ${name}%0A
📞 الهاتف: ${phone}%0A
🏙 المدينة: ${city}%0A
📍 العنوان: ${address}%0A
📝 ملاحظات: ${notes || "لا توجد"}%0A
--------------------%0A
${orderDetails}%0A
💰 الإجمالي: ${total} ريال`;

    const telegramUrl = `https://api.telegram.org/bot${telegramBotToken}/sendMessage?chat_id=${telegramChatId}&text=${message}`;
    window.open(telegramUrl, "_blank");

    // تفريغ السلة بعد الإرسال
    cart = [];
    updateCartUI();
    document.querySelector(".cart-overlay").classList.remove("active");
    alert("تم إرسال الطلب بنجاح ✅");
  });
</script>

</body>
</html>
